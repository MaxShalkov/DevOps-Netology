# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

>Windows: `ipconfig /all`, `get-netadapter`. Linux: `ifconfig` (depricated), `ip l`

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

>`lldp`

>`apt install lldpd` -> `systemctl enable lldpd && systemctl start lldpd`. Команда `lldpctl` должна показать сведения о коммутаторе, к которому подключен хост.

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

>`VLAN`

>`sudo apt-get install vlan`. Необходимо также установить модуль ядра `sudo modprobe 8021q`. Проверка загрузки модуля `lsmod | grep 8021q`. Но это не работает для Ubuntu 17.10 и выше, для Ubuntu 20.04 необходимо настраивать через `netplan`.

>Конфигурация настраивается в файле `/etc/netplan/00-installer-config.yaml`
```
  network: # количество пробелов должно быть одинаковым
    version: 2
    ethernets:
      eth0:
        dhcp4: true
    vlans: # блок настройки VLAN
      vlan10: # произвольное имя VLAN интерфейса
        id: 10 # vlan id
        link: eth0 # интерфейс, через который VLAN будет работать
        addresses: [192.168.1.2/24] 
        gateway: 192.168.1.1 # шлюз
        routes: # блок описания маршрутов
        - to: 192.168.1.2/24 # адрес/подсеть, до которой необходим маршрут
          via: 192.168.1.1 # шлюз, через который доступна подсеть
          on-link: true # прописывать маршруты при поднятии линка
```

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

>`bonding`. Для балансировки посредством Round Robin есть mode=0 balance-rr.
```
  bonds:
    bond0:
      interfaces: [eth0, eth1]
      addresses: [10.0.0.10/24]
      gateway4: 10.0.0.1
      parameters:
        mode: balance-rr
      nameservers:
        addresses:
          - "8.8.8.8"
```

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

>1 адрес сети, 6 адресов хостов, 1 broadcast. `ipcalc 10.10.10.0/24 /29` - 32 подсети на 192 хоста. `10.10.10.224/29`, `10.10.10.248/29`, `10.10.10.168/29`.

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

>`ipcalc -b 100.64.0.0/10 -s 40` -> 100.64.0.0/26 

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

>`arp -a` в linux и windows, однако в linux это часть пакета net-tools, так что более правильно использовать `ip neigh`. Очистить в Windows `netsh interface ip delete arpcache`, в linux `sudo ip neigh flush all` или например для конкретного интерфейса `sudo ip neigh flush dev eth0`. Удалить один в windows `arp -d 192.168.56.255`, в linux `sudo ip neigh del 10.0.2.6 dev eth0`

 ---
## Задание для самостоятельной отработки (необязательно к выполнению)

 8*. Установите эмулятор EVE-ng.
 
 Инструкция по установке - https://github.com/svmyasnikov/eve-ng

 Выполните задания на lldp, vlan, bonding в эмуляторе EVE-ng. 
 